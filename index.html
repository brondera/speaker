<!DOCTYPE html>
<html lang="sv">
<title>brondera.com - Hello World!</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<style>
  html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif}
</style>
<html>
<head>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<script>
  var phonyArray = [];
  $(document).ready(function(callback) {
    $.ajax({
      //call APT table using ORDS API (published by readonly user):
      url: "https://dx4l1ex2ewgtxe9-db202003051643.adb.eu-frankfurt-1.oraclecloudapps.com/ords/bravo/phonetic/readonly"
    }).then(function(res) {
        $.each(res.items, function( i, itemData ) {
            //populate phonyArray with data from table API
            phonyArray[i] = itemData;
        });
        if(callback) callback();  //check before calling it. 

        //check for parameters in url
        const urlParams = new URLSearchParams(window.location.search);
        //if there is a string parameter, process it
        if (urlParams.has('userString')) {
          str2 = urlParams.get('userString');
          str2 = str2.toUpperCase(); //TODO: trim that string
          for (var i = 0; i < str2.length; i++) {
            //run everey character in the strin against the phonyarray
            $('.telephony').append(phonyArray[phonyArray.indexOf(phonyArray.find(o => o.character === str2.charAt(i)))].telephony + " ");
            $('.character').append(phonyArray[phonyArray.indexOf(phonyArray.find(o => o.character === str2.charAt(i)))].character + " ");
            $('.morsecode').append(phonyArray[phonyArray.indexOf(phonyArray.find(o => o.character === str2.charAt(i)))].morsecode + " ");
            $('.phonic').append(phonyArray[phonyArray.indexOf(phonyArray.find(o => o.character === str2.charAt(i)))].phonic + " ");
          }
        };
    });

  });
</script>
</head>
<body class="w3-sand">

  <!-- Page Container -->
  <div class="w3-container w3-center w3-margin-top">
    <h1>Bravo!</h1>
    <p>A demo page that turns Your strings into radio language!</p>
  </div>
  <div class="w3-white w3-text-grey w3-card-4 w3-center w3-margin">
    <div class="w3-container w3-khaki">
      <h2>Input Form</h2>
    </div>
    <!-- TODO: Might change to POST method? -->
    <form class="w3-container w3-card-4">
      <p>
      <label for="userString">Please input a string in characters A-Z:</label><br>
      <input class="w3-input w3-border" type="text" name="userString" id="userString" pattern="[a-zA-Z]+" title="Please only use characters A-Z" required></p>
      <input class="w3-btn w3-black w3-margin-bottom" type="submit" value="Submit">
    </form>
   </div>

   <div class="w3-white w3-text-grey w3-card-4 w3-center w3-margin">
    <div class="w3-container w3-khaki">
      <h2>Output</h2>
    </div>
    <p class="character w3-left-align w3-margin-left"><b>Character: </b></p>
    <p class="morsecode w3-left-align w3-margin-left"><b>Morsecode: </b></p>
    <p class="telephony w3-left-align w3-margin-left"><b>Telephony: </b></p>
    <p class="phonic w3-left-align w3-margin-left"><b>Phonic: </b></p>

    <div class="w3-container">
      <!-- TODO: Make this actually clear something -->
      <button class="w3-btn w3-black w3-margin-bottom">CLEAR</button>
    </div>
   </div>

   <footer class="w3-container w3-khaki w3-center w3-margin-top">
    <p>Find me on social media:</p>
    <a href="https://twitter.com/axelbronder/"><i class="fab fa-twitter w3-xxlarge w3-margin-right w3-hover-opacity"></i></a>
    <a href="https://github.com/brondera/"><i class="fab fa-github w3-xxlarge w3-margin-right w3-hover-opacity"></i></a>
    <a href="https://www.linkedin.com/in/brondera/"><i class="fab fa-linkedin w3-xxlarge w3-hover-opacity"></i></a>
    <p>
      Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
      and <a href="https://www.oracle.com/cloud/free/" target="_blank">OCI Always Free Tier</a>
    </p>
    <p><a href="https://www.brondera.com">Back to brondera.com</a></p>
  </footer>
</body>
</html>
